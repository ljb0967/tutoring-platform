{"ast":null,"code":"var _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar express = require('express');\nvar router = express.Router();\nvar Schedule = require('../models/Schedule');\nvar auth = require('../auth');\nrouter.post('/create', auth.authenticateToken, function () {\n  var _ref = _asyncToGenerator(function* (req, res) {\n    try {\n      var _req$body = req.body,\n        title = _req$body.title,\n        description = _req$body.description,\n        date = _req$body.date,\n        studyGroupId = _req$body.studyGroupId;\n      var schedule = new Schedule({\n        title: title,\n        description: description,\n        date: date,\n        userId: req.user.userId,\n        studyGroupId: studyGroupId || null\n      });\n      yield schedule.save();\n      res.status(201).json(schedule);\n    } catch (error) {\n      res.status(500).json({\n        error: '서버 오류'\n      });\n    }\n  });\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.get('/', auth.authenticateToken, function () {\n  var _ref2 = _asyncToGenerator(function* (req, res) {\n    try {\n      var schedules = yield Schedule.find({\n        userId: req.user.userId\n      });\n      res.json(schedules);\n    } catch (error) {\n      res.status(500).json({\n        error: '서버 오류'\n      });\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.put('/:id', auth.authenticateToken, function () {\n  var _ref3 = _asyncToGenerator(function* (req, res) {\n    try {\n      var schedule = yield Schedule.findById(req.params.id);\n      if (!schedule || schedule.userId.toString() !== req.user.userId) {\n        return res.status(404).json({\n          error: '일정을 찾을 수 없습니다'\n        });\n      }\n      Object.assign(schedule, req.body);\n      yield schedule.save();\n      res.json(schedule);\n    } catch (error) {\n      res.status(500).json({\n        error: '서버 오류'\n      });\n    }\n  });\n  return function (_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nrouter.delete('/:id', auth.authenticateToken, function () {\n  var _ref4 = _asyncToGenerator(function* (req, res) {\n    try {\n      var schedule = yield Schedule.findById(req.params.id);\n      if (!schedule || schedule.userId.toString() !== req.user.userId) {\n        return res.status(404).json({\n          error: '일정을 찾을 수 없습니다'\n        });\n      }\n      yield schedule.deleteOne();\n      res.json({\n        message: '일정이 삭제되었습니다.'\n      });\n    } catch (error) {\n      res.status(500).json({\n        error: '서버 오류'\n      });\n    }\n  });\n  return function (_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nmodule.exports = router;","map":{"version":3,"names":["express","require","router","Router","Schedule","auth","post","authenticateToken","_ref","_asyncToGenerator","req","res","_req$body","body","title","description","date","studyGroupId","schedule","userId","user","save","status","json","error","_x","_x2","apply","arguments","get","_ref2","schedules","find","_x3","_x4","put","_ref3","findById","params","id","toString","Object","assign","_x5","_x6","delete","_ref4","deleteOne","message","_x7","_x8","module","exports"],"sources":["C:/startcoding/tutoring-platform/routes/scheduleRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst Schedule = require('../models/Schedule');\r\nconst auth = require('../auth');\r\n\r\n// 일정 생성\r\nrouter.post('/create', auth.authenticateToken, async (req, res) => {\r\n    try {\r\n        const { title, description, date, studyGroupId } = req.body;\r\n        const schedule = new Schedule({\r\n            title,\r\n            description,\r\n            date,\r\n            userId: req.user.userId,\r\n            studyGroupId: studyGroupId || null,\r\n        });\r\n        await schedule.save();\r\n        res.status(201).json(schedule);\r\n    } catch (error) {\r\n        res.status(500).json({ error: '서버 오류' });\r\n    }\r\n});\r\n\r\n// 일정 조회\r\nrouter.get('/', auth.authenticateToken, async (req, res) => {\r\n    try {\r\n        const schedules = await Schedule.find({ userId: req.user.userId });\r\n        res.json(schedules);\r\n    } catch (error) {\r\n        res.status(500).json({ error: '서버 오류' });\r\n    }\r\n});\r\n\r\n// 일정 수정\r\nrouter.put('/:id', auth.authenticateToken, async (req, res) => {\r\n    try {\r\n        const schedule = await Schedule.findById(req.params.id);\r\n        if (!schedule || schedule.userId.toString() !== req.user.userId) {\r\n            return res.status(404).json({ error: '일정을 찾을 수 없습니다' });\r\n        }\r\n        Object.assign(schedule, req.body);\r\n        await schedule.save();\r\n        res.json(schedule);\r\n    } catch (error) {\r\n        res.status(500).json({ error: '서버 오류' });\r\n    }\r\n});\r\n\r\n// 일정 삭제\r\nrouter.delete('/:id', auth.authenticateToken, async (req, res) => {\r\n    try {\r\n        const schedule = await Schedule.findById(req.params.id);\r\n        if (!schedule || schedule.userId.toString() !== req.user.userId) {\r\n            return res.status(404).json({ error: '일정을 찾을 수 없습니다' });\r\n        }\r\n        await schedule.deleteOne();\r\n        res.json({ message: '일정이 삭제되었습니다.' });\r\n    } catch (error) {\r\n        res.status(500).json({ error: '서버 오류' });\r\n    }\r\n});\r\n\r\nmodule.exports = router;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}